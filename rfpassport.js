//let recognized_data = [{"language":"ru","location":{"height":30,"width":32,"x":321,"y":1710},"text":"о"},{"language":"ru","location":{"height":27,"width":32,"x":321,"y":1656},"text":"с"},{"language":"ru","location":{"height":28,"width":32,"x":321,"y":1608},"text":"с"},{"language":"ru","location":{"height":32,"width":32,"x":321,"y":1549},"text":"и"},{"language":"ru","location":{"height":37,"width":32,"x":321,"y":1432},"text":"с"},{"language":"ru","location":{"height":32,"width":32,"x":321,"y":1373},"text":"к"},{"language":"ru","location":{"height":28,"width":32,"x":320,"y":1318},"text":"а"},{"language":"ru","location":{"height":22,"width":32,"x":320,"y":1276},"text":"я"},{"language":"ru","location":{"height":27,"width":29,"x":322,"y":1006},"text":"Е"},{"language":"ru","location":{"height":28,"width":28,"x":322,"y":953},"text":"Р"},{"language":"ru","location":{"height":28,"width":28,"x":322,"y":900},"text":"А"},{"language":"ru","location":{"height":28,"width":28,"x":322,"y":847},"text":"Ц"},{"language":"ru","location":{"height":27,"width":28,"x":322,"y":747},"text":"я"},{"language":"ru","location":{"height":96,"width":20,"x":450,"y":1793},"text":"Паспорт"},{"language":"ru","location":{"height":66,"width":20,"x":450,"y":1716},"text":"выдан"},{"language":"ru","location":{"height":52,"width":41,"x":424,"y":1468},"text":"ТП"},{"language":"ru","location":{"height":73,"width":41,"x":423,"y":1369},"text":"№1"},{"language":"ru","location":{"height":135,"width":41,"x":422,"y":1167},"text":"ГОР."},{"language":"ru","location":{"height":272,"width":42,"x":420,"y":868},"text":"ПОДОЛЬСКЕ"},{"language":"ru","location":{"height":146,"width":40,"x":496,"y":1493},"text":"ОУФМС"},{"language":"ru","location":{"height":179,"width":41,"x":495,"y":1280},"text":"РОССИИ"},{"language":"ru","location":{"height":66,"width":40,"x":495,"y":1189},"text":"ПО"},{"language":"ru","location":{"height":301,"width":41,"x":494,"y":863},"text":"МОСКОВСКОЙ"},{"language":"ru","location":{"height":118,"width":40,"x":493,"y":720},"text":"ОБЛ."},{"language":"ru","location":{"height":119,"width":39,"x":571,"y":1253},"text":"гор."},{"language":"ru","location":{"height":272,"width":41,"x":569,"y":953},"text":"подольске"},{"language":"ru","location":{"height":205,"width":44,"x":660,"y":930},"text":"500-120"},{"language":"ru","location":{"height":55,"width":35,"x":687,"y":1834},"text":"Дата"},{"language":"ru","location":{"height":83,"width":34,"x":678,"y":1742},"text":"выдачи"},{"language":"ru","location":{"height":74,"width":29,"x":674,"y":1653},"text":"23."},{"language":"ru","location":{"height":72,"width":26,"x":674,"y":1566},"text":"04."},{"language":"ru","location":{"height":106,"width":29,"x":675,"y":1440},"text":"2008"},{"language":"ru","location":{"height":41,"width":27,"x":679,"y":1376},"text":"Код"},{"language":"ru","location":{"height":169,"width":31,"x":681,"y":1196},"text":"подразделения"},{"language":"ru","location":{"height":84,"width":20,"x":869,"y":912},"text":"Личный"},{"language":"ru","location":{"height":39,"width":19,"x":870,"y":864},"text":"код"},{"language":"ru","location":{"height":84,"width":20,"x":1026,"y":938},"text":"Анчная"},{"language":"ru","location":{"height":93,"width":20,"x":1026,"y":836},"text":"подпить"},{"language":"ru","location":{"height":108,"width":25,"x":1388,"y":1893},"text":"россия"},{"language":"ru","location":{"height":108,"width":26,"x":1386,"y":1451},"text":"россия"},{"language":"ru","location":{"height":110,"width":26,"x":1384,"y":1004},"text":"россия"},{"language":"ru","location":{"height":89,"width":18,"x":1467,"y":1404},"text":"Фамилия"},{"language":"ru","location":{"height":237,"width":39,"x":1433,"y":1017},"text":"богданов"},{"language":"ru","location":{"height":96,"width":20,"x":1680,"y":1398},"text":"Отчество"},{"language":"ru","location":{"height":180,"width":43,"x":1582,"y":1049},"text":"сергей"},{"language":"ru","location":{"height":89,"width":36,"x":1604,"y":1017},"text":"россии"},{"language":"ru","location":{"height":289,"width":44,"x":1651,"y":1003},"text":"АЛЕКСЕЕВИЧ"},{"language":"ru","location":{"height":108,"width":24,"x":1614,"y":554},"text":"РОССИЯ"},{"language":"ru","location":{"height":40,"width":30,"x":1695,"y":594},"text":"00"},{"language":"ru","location":{"height":51,"width":21,"x":1725,"y":1219},"text":"Дата"},{"language":"ru","location":{"height":106,"width":20,"x":1753,"y":1165},"text":"рождения"},{"language":"ru","location":{"height":300,"width":42,"x":1734,"y":811},"text":"25.03.1963"},{"language":"ru","location":{"height":62,"width":18,"x":1798,"y":1429},"text":"Места"},{"language":"ru","location":{"height":104,"width":18,"x":1825,"y":1389},"text":"рождения"},{"language":"ru","location":{"height":122,"width":39,"x":1793,"y":1232},"text":"ГОР."},{"language":"ru","location":{"height":235,"width":40,"x":1794,"y":973},"text":"ПОДОЛЬСК"},{"language":"ru","location":{"height":108,"width":25,"x":1834,"y":1002},"text":"россия"},{"language":"ru","location":{"height":302,"width":45,"x":1865,"y":1051},"text":"московской"},{"language":"ru","location":{"height":119,"width":42,"x":1871,"y":903},"text":"обл."},{"language":"en","location":{"height":32,"width":29,"x":1920,"y":598},"text":"co"},{"language":"ru","location":{"height":110,"width":25,"x":2066,"y":1887},"text":"россия"},{"language":"ru","location":{"height":107,"width":26,"x":2064,"y":1444},"text":"россия"},{"language":"ru","location":{"height":108,"width":25,"x":2062,"y":1002},"text":"россия"},{"language":"ru","location":{"height":108,"width":24,"x":2063,"y":554},"text":"россия"}]
//let recognized_data = [{"language":"ru","location":{"height":32,"width":29,"x":796,"y":181},"text":"о"},{"language":"ru","location":{"height":32,"width":30,"x":848,"y":182},"text":"с"},{"language":"ru","location":{"height":32,"width":32,"x":905,"y":182},"text":"с"},{"language":"ru","location":{"height":32,"width":31,"x":964,"y":183},"text":"и"},{"language":"ru","location":{"height":32,"width":32,"x":1022,"y":183},"text":"й"},{"language":"ru","location":{"height":32,"width":32,"x":1081,"y":184},"text":"с"},{"language":"ru","location":{"height":32,"width":27,"x":1140,"y":184},"text":"к"},{"language":"ru","location":{"height":33,"width":28,"x":1187,"y":184},"text":"а"},{"language":"ru","location":{"height":32,"width":26,"x":1242,"y":185},"text":"я"},{"language":"ru","location":{"height":31,"width":26,"x":1408,"y":187},"text":"е"},{"language":"ru","location":{"height":31,"width":27,"x":1454,"y":188},"text":"д"},{"language":"ru","location":{"height":31,"width":28,"x":1508,"y":188},"text":"е"},{"language":"ru","location":{"height":32,"width":27,"x":1556,"y":188},"text":"р"},{"language":"ru","location":{"height":31,"width":28,"x":1611,"y":189},"text":"а"},{"language":"ru","location":{"height":31,"width":27,"x":1659,"y":189},"text":"ц"},{"language":"ru","location":{"height":31,"width":32,"x":1719,"y":190},"text":"и"},{"language":"ru","location":{"height":31,"width":23,"x":1774,"y":190},"text":"я"},{"language":"ru","location":{"height":21,"width":97,"x":646,"y":310},"text":"Паспорт"},{"language":"ru","location":{"height":20,"width":67,"x":756,"y":312},"text":"выдан"},{"language":"ru","location":{"height":42,"width":65,"x":1064,"y":313},"text":"64"},{"language":"ru","location":{"height":43,"width":215,"x":1158,"y":313},"text":"отделом"},{"language":"ru","location":{"height":42,"width":210,"x":1402,"y":315},"text":"милиции"},{"language":"ru","location":{"height":42,"width":303,"x":1091,"y":389},"text":"КИРОВСКОГО"},{"language":"ru","location":{"height":42,"width":174,"x":1421,"y":390},"text":"РАЙОНА"},{"language":"ru","location":{"height":41,"width":473,"x":1094,"y":464},"text":"САНКТ-ПЕТЕРБУРГА"},{"language":"ru","location":{"height":32,"width":60,"x":648,"y":540},"text":"Дата"},{"language":"ru","location":{"height":33,"width":76,"x":716,"y":540},"text":"выдачи"},{"language":"ru","location":{"height":33,"width":295,"x":803,"y":541},"text":"01.04.2004"},{"language":"ru","location":{"height":42,"width":211,"x":1394,"y":538},"text":"782-064"},{"language":"ru","location":{"height":22,"width":88,"x":1540,"y":731},"text":"Личный"},{"language":"ru","location":{"height":21,"width":35,"x":1641,"y":733},"text":"код"},{"language":"ru","location":{"height":20,"width":88,"x":1513,"y":889},"text":"Личная"},{"language":"ru","location":{"height":21,"width":87,"x":1613,"y":890},"text":"подпись"},{"language":"ru","location":{"height":19,"width":93,"x":1040,"y":1309},"text":"Фамилия"},{"language":"ru","location":{"height":45,"width":208,"x":1298,"y":1268},"text":"ГЛАДКИЙ"},{"language":"ru","location":{"height":21,"width":50,"x":1036,"y":1467},"text":"Имя"},{"language":"ru","location":{"height":42,"width":181,"x":1310,"y":1431},"text":"сергей"},{"language":"ru","location":{"height":42,"width":308,"x":1244,"y":1506},"text":"николаевич"},{"language":"ru","location":{"height":19,"width":93,"x":1039,"y":1547},"text":"Отчество"},{"language":"ru","location":{"height":37,"width":114,"x":1099,"y":1596},"text":"МУЖ."},{"language":"ru","location":{"height":20,"width":52,"x":1262,"y":1598},"text":"Дата"},{"language":"ru","location":{"height":39,"width":290,"x":1430,"y":1593},"text":"06.11.1980"},{"language":"ru","location":{"height":20,"width":106,"x":1260,"y":1625},"text":"рождения"},{"language":"ru","location":{"height":19,"width":64,"x":1040,"y":1675},"text":"Место"},{"language":"ru","location":{"height":18,"width":100,"x":1038,"y":1704},"text":"рождения"},{"language":"ru","location":{"height":43,"width":259,"x":1186,"y":1667},"text":"ЛЕНИНГРАД"}]
let recognized_data = [{"language":"ru","location":{"height":32,"width":202,"x":387,"y":755},"text":"заемщика"},{"language":"ru","location":{"height":27,"width":49,"x":612,"y":761},"text":"по"},{"language":"ru","location":{"height":33,"width":239,"x":683,"y":762},"text":"кредитному"},{"language":"ru","location":{"height":28,"width":178,"x":958,"y":772},"text":"договору"},{"language":"ru","location":{"height":24,"width":49,"x":1156,"y":777},"text":"на"},{"language":"ru","location":{"height":35,"width":70,"x":452,"y":928},"text":"ро"},{"language":"ru","location":{"height":34,"width":34,"x":555,"y":930},"text":"с"},{"language":"ru","location":{"height":34,"width":29,"x":614,"y":931},"text":"с"},{"language":"ru","location":{"height":34,"width":31,"x":668,"y":932},"text":"и"},{"language":"ru","location":{"height":34,"width":33,"x":727,"y":933},"text":"й"},{"language":"ru","location":{"height":34,"width":28,"x":789,"y":934},"text":"с"},{"language":"ru","location":{"height":34,"width":30,"x":838,"y":934},"text":"к"},{"language":"ru","location":{"height":34,"width":28,"x":896,"y":935},"text":"а"},{"language":"ru","location":{"height":34,"width":23,"x":945,"y":936},"text":"я"},{"language":"ru","location":{"height":33,"width":27,"x":1167,"y":941},"text":"д"},{"language":"ru","location":{"height":33,"width":26,"x":1215,"y":941},"text":"е"},{"language":"ru","location":{"height":33,"width":30,"x":1262,"y":942},"text":"р"},{"language":"ru","location":{"height":33,"width":28,"x":1320,"y":942},"text":"а"},{"language":"ru","location":{"height":33,"width":30,"x":1369,"y":943},"text":"ц"},{"language":"ru","location":{"height":34,"width":33,"x":1427,"y":943},"text":"и"},{"language":"ru","location":{"height":33,"width":26,"x":1489,"y":944},"text":"я"},{"language":"ru","location":{"height":22,"width":94,"x":356,"y":1057},"text":"Паспорт"},{"language":"ru","location":{"height":21,"width":65,"x":459,"y":1059},"text":"выдан"},{"language":"ru","location":{"height":45,"width":220,"x":722,"y":1038},"text":"отделом"},{"language":"ru","location":{"height":47,"width":305,"x":969,"y":1041},"text":"внутренних"},{"language":"ru","location":{"height":43,"width":86,"x":1301,"y":1046},"text":"дел"},{"language":"ru","location":{"height":45,"width":421,"x":748,"y":1114},"text":"ЛОМОНОСОВСКОГО"},{"language":"ru","location":{"height":43,"width":179,"x":1197,"y":1119},"text":"ОКРУГА"},{"language":"ru","location":{"height":43,"width":184,"x":774,"y":1189},"text":"ГОРОДА"},{"language":"ru","location":{"height":45,"width":357,"x":984,"y":1191},"text":"АРХАНГЕЛЬСКА"},{"language":"ru","location":{"height":46,"width":304,"x":504,"y":1259},"text":"15.01.2005"},{"language":"ru","location":{"height":44,"width":211,"x":1113,"y":1268},"text":"292-002"},{"language":"ru","location":{"height":20,"width":51,"x":356,"y":1295},"text":"Дата"},{"language":"ru","location":{"height":20,"width":77,"x":420,"y":1296},"text":"выдачи"},{"language":"ru","location":{"height":21,"width":41,"x":825,"y":1302},"text":"Код"},{"language":"ru","location":{"height":24,"width":166,"x":877,"y":1303},"text":"подразделения"},{"language":"ru","location":{"height":37,"width":95,"x":852,"y":1420},"text":"служб"},{"language":"ru","location":{"height":22,"width":84,"x":1247,"y":1488},"text":"Личный"},{"language":"ru","location":{"height":21,"width":39,"x":1340,"y":1490},"text":"код"},{"language":"ru","location":{"height":26,"width":36,"x":1622,"y":1477},"text":"сл"},{"language":"ru","location":{"height":27,"width":39,"x":1619,"y":1540},"text":"00"},{"language":"ru","location":{"height":21,"width":77,"x":1221,"y":1644},"text":"Личная"},{"language":"ru","location":{"height":22,"width":89,"x":1309,"y":1646},"text":"подпись"},{"language":"en","location":{"height":12,"width":21,"x":2291,"y":1834},"text":"thing"},{"language":"en","location":{"height":12,"width":25,"x":1311,"y":1850},"text":"this"},{"language":"ru","location":{"height":21,"width":92,"x":731,"y":1997},"text":"Фамилия"},{"language":"ru","location":{"height":45,"width":215,"x":1010,"y":1959},"text":"никитин"},{"language":"ru","location":{"height":22,"width":45,"x":725,"y":2155},"text":"Имя"},{"language":"ru","location":{"height":44,"width":206,"x":1009,"y":2121},"text":"АЛЕКСЕЙ"},{"language":"ru","location":{"height":22,"width":96,"x":725,"y":2236},"text":"Отчество"},{"language":"ru","location":{"height":43,"width":247,"x":976,"y":2195},"text":"павлович"},{"language":"ru","location":{"height":22,"width":41,"x":724,"y":2312},"text":"Пол"},{"language":"ru","location":{"height":38,"width":124,"x":795,"y":2279},"text":"МУЖ."},{"language":"ru","location":{"height":20,"width":50,"x":949,"y":2292},"text":"Дата"},{"language":"ru","location":{"height":45,"width":299,"x":1129,"y":2280},"text":"03.02.1982"},{"language":"ru","location":{"height":18,"width":104,"x":949,"y":2321},"text":"рождения"},{"language":"ru","location":{"height":22,"width":67,"x":723,"y":2364},"text":"Место"},{"language":"ru","location":{"height":20,"width":98,"x":723,"y":2393},"text":"рождения"},{"language":"ru","location":{"height":46,"width":489,"x":884,"y":2353},"text":"гор. архангельск"},{"language":"ru","location":{"height":26,"width":39,"x":1597,"y":2494},"text":"сл"},{"language":"en","location":{"height":28,"width":33,"x":1595,"y":2558},"text":"Co"}]
//let recognized_data = [{"language":"ru","location":{"height":44,"width":194,"x":1292,"y":384},"text":"032634050"},{"language":"ru","location":{"height":23,"width":62,"x":885,"y":426},"text":"ТУГАН"},{"language":"ru","location":{"height":21,"width":36,"x":955,"y":430},"text":"ЖЕР"},{"language":"ru","location":{"height":22,"width":51,"x":1004,"y":433},"text":"МЕСТО"},{"language":"ru","location":{"height":25,"width":94,"x":1064,"y":437},"text":"РОЖДЕНИЯ"},{"language":"ru","location":{"height":41,"width":208,"x":896,"y":452},"text":"АКТЮБИНСКАЯ"},{"language":"ru","location":{"height":32,"width":73,"x":1119,"y":467},"text":"ОБЛ."},{"language":"ru","location":{"height":22,"width":48,"x":883,"y":485},"text":"улты"},{"language":"ru","location":{"height":30,"width":167,"x":943,"y":488},"text":"национальност."},{"language":"ru","location":{"height":35,"width":130,"x":891,"y":511},"text":"РУССКИЙ"},{"language":"ru","location":{"height":23,"width":59,"x":883,"y":543},"text":"БЕРГЕН"},{"language":"ru","location":{"height":23,"width":70,"x":947,"y":547},"text":"МЕКЕМЕ"},{"language":"ru","location":{"height":19,"width":7,"x":1022,"y":552},"text":"/"},{"language":"ru","location":{"height":21,"width":42,"x":1037,"y":553},"text":"ОРГАН"},{"language":"ru","location":{"height":23,"width":69,"x":1087,"y":556},"text":"ВЫДАЧИ"},{"language":"ru","location":{"height":31,"width":60,"x":887,"y":569},"text":"МВД"},{"language":"ru","location":{"height":39,"width":182,"x":960,"y":574},"text":"РЕСПУБЛИКИ"},{"language":"ru","location":{"height":37,"width":160,"x":1157,"y":587},"text":"КАЗАХСТАН"},{"language":"ru","location":{"height":24,"width":83,"x":875,"y":602},"text":"БЕРИЛГЕН"},{"language":"ru","location":{"height":20,"width":16,"x":997,"y":610},"text":"-"},{"language":"ru","location":{"height":26,"width":105,"x":1021,"y":611},"text":"КОЛДАНЫЛУ"},{"language":"ru","location":{"height":22,"width":50,"x":1201,"y":623},"text":"ДАТА"},{"language":"ru","location":{"height":24,"width":68,"x":1256,"y":626},"text":"ВЫДАЧИ"},{"language":"ru","location":{"height":22,"width":45,"x":1337,"y":631},"text":"срок"},{"language":"ru","location":{"height":24,"width":86,"x":1390,"y":635},"text":"действия"},{"language":"ru","location":{"height":37,"width":150,"x":890,"y":630},"text":"14.12.2011"},{"language":"ru","location":{"height":37,"width":147,"x":1064,"y":641},"text":"13.12.2021"},{"language":"en","location":{"height":99,"width":915,"x":617,"y":698},"text":"IDKAZ0326340501661004300675<<<"},{"language":"ru","location":{"height":100,"width":915,"x":614,"y":763},"text":"6610045м2112138KAZ<<<<<<<<<<<8"},{"language":"en","location":{"height":95,"width":899,"x":618,"y":831},"text":"POBIRUKHIN<<IGOR<<<<<<<<<<<<<<"}];

let personal_data = {
    "passport": {},
    "patent": {},
    "migration_card": {}
};
let is_passport = false,
    is_migration_card = false,
    is_patent = false,
    supposed_values = [];
let other_docs_keywords = [
    /дмс|страхово[йе]|полис/i,
    /чек|платеж|плательщик/i,
    /перевод/i,
    /опись|расписка|уведомлен/i,
    /visas|владелец|гражданина/i,
    /holder/,   // это слово должно быть всегда чувствительным к регистру
    /анкет[аы]|соискателя/i,
    /работник/i,
];

let includes_passport_keywords = false,
    includes_patent_keywords = false,
    includes_migration_card_keywords = false,
    recognized_data_length = recognized_data.length;

function hasOtherKeywords(recognized_data, reg_exp_list) {
    for (let item of recognized_data) {
        for (let reg_exp of reg_exp_list) {
            if (reg_exp.test(item['text'])) {
                return true;
            }
        }
    }

    return false;
}

for (let item of recognized_data) {
    // отсутствие сравнения кол-ва ключей паспорта
    // с 0 позволяет обнаруживать дополнительные
    // титульные страницы паспортов, если паспорт
    // в документе не один
    if (/passport|паспорт|identity|личности|паспорта/i.test(item['text'])) {
        includes_passport_keywords = true;
    }

    // 12 - общее количество распознаваемых полей паспорта
    if (Object.keys(personal_data['passport']).length > 0
        && Object.keys(personal_data['passport']).length < 12
        && /орган|authority|кем/i.test(item['text'])) {
        includes_passport_keywords = true;
    }

    if (Object.keys(personal_data['migration_card']).length === 0
        && /departure|migrat/i.test(item['text'])) {
        includes_migration_card_keywords = true;
    }

    if (Object.keys(personal_data['patent']).length === 0
        && /патент/i.test(item['text'])) {
        includes_patent_keywords = true;
    }

    // 13 - общее количество распознаваемых  полей патента
    if (Object.keys(personal_data['patent']).length > 0
        && Object.keys(personal_data['patent']).length < 13
        && /кем/i.test(item['text'])) {
        includes_patent_keywords = true;
    }

    if (
        includes_passport_keywords
        || includes_patent_keywords
        || includes_migration_card_keywords
    ) {
        break;
    }
}

let is_other_document = hasOtherKeywords(recognized_data, other_docs_keywords);

is_passport = includes_passport_keywords ? !is_other_document : is_passport;
is_patent = includes_patent_keywords ? !is_other_document : is_patent;
is_migration_card = includes_migration_card_keywords ? !is_other_document : is_migration_card;


// DefinePassportType

let is_paper_passport = false;
for (let i = 0; i < recognized_data_length; i++) {
    if (/type|country|code|личный/i.test(recognized_data[i]['text'])) {
        is_paper_passport = true;
        break;
    }
}

// DefinePlasticPassport
let plastic_passport_country = null;
let country_data = {
    'Киргизстан': /кыргыз|kgz/i,
    'Казахстан': /казах|kaz/i,
};

out_label: for (let i = 0; i < recognized_data_length; i++) {
    for (let key in country_data) {
        if (country_data[key].test(recognized_data[i]['text'])) {
            plastic_passport_country = key;
            break out_label;
        }
    }
}




// DefineKZPlasticPassportPage

/*let birth_place = null,
    citizenship = null,
    authority = null,
    term = null,
    issue_date=null,
    expiration_date = null,
    expiration_date_data = [],
    issue_date_data = [],
    birth_place_data = [],
    authority_data = [],
    citizenship_data=[];

for (let i = 0; i < recognized_data_length; i++) {
    if (/орган/i.test(recognized_data[i]['text'])) {
        authority = recognized_data[i];
    }

    if (/срок/i.test(recognized_data[i]['text'])) {
        term = recognized_data[i];
    }

    if (/место/i.test(recognized_data[i]['text'])) {
        birth_place = recognized_data[i];
    }

    if (/национальность|национальност./i.test(recognized_data[i]['text'])) {
        citizenship = recognized_data[i];
    }
}

for (let i = 0; i < recognized_data_length; i++) {
    if (birth_place
        && recognized_data[i]['location']['x'] > birth_place['location']['x'] - 150
        && recognized_data[i]['location']['y'] > birth_place['location']['y'] + 10
        && recognized_data[i]['location']['y'] < birth_place['location']['y'] + 40) {
        birth_place_data.push(recognized_data[i]['text']);
    }

    if (birth_place
        && recognized_data[i]['location']['x'] > birth_place['location']['x'] + 250
        && recognized_data[i]['location']['y'] > birth_place['location']['y'] - 75
        && recognized_data[i]['location']['y'] < birth_place['location']['y'] - 30) {
        personal_data['passport']['serial'] = recognized_data[i]['text'].slice(0, 2);
        personal_data['passport']['number'] = recognized_data[i]['text'].slice(2);
    }

    if (citizenship
        && recognized_data[i]['location']['x'] > citizenship['location']['x'] - 250
        && recognized_data[i]['location']['y'] > citizenship['location']['y'] + 10
        && recognized_data[i]['location']['y'] < citizenship['location']['y'] + 40) {
        citizenship_data.push(recognized_data[i]['text'])
    }

    if (authority
        && recognized_data[i]['location']['x'] > authority['location']['x'] - 250
        && recognized_data[i]['location']['y'] > authority['location']['y'] + 10
        && recognized_data[i]['location']['y'] < authority['location']['y'] + 40) {
        authority_data.push(recognized_data[i]['text']);
    }

    if (term
        && recognized_data[i]['location']['x'] > term['location']['x'] - 500
        && recognized_data[i]['location']['y'] > term['location']['y'] - 5
        && recognized_data[i]['location']['y'] < term['location']['y'] + 10) {
        issue_date_data.push(recognized_data[i]['text'])
    }

    if (term
        && recognized_data[i]['location']['x'] > term['location']['x'] - 400
        && recognized_data[i]['location']['y'] > term['location']['y']
        && recognized_data[i]['location']['y'] < term['location']['y'] + 30) {
        expiration_date_data.push(recognized_data[i]['text'])
    }
}

personal_data['passport']['gender'] = '-';
personal_data['passport']['birth_place'] = birth_place_data.length > 0 ? birth_place_data.join(' ') : '-';
personal_data['passport']['authority'] = authority_data.length > 0 ? authority_data.join(' ') : '-';
personal_data['passport']['citizenship'] = citizenship_data.length > 0 ? citizenship_data.join(' ') : '-';
personal_data['passport']['issue_date'] = issue_date_data.length > 0 ? issue_date_data[issue_date_data.length - 1] : '-';
personal_data['passport']['expiration_date'] = expiration_date_data.length > 0 ? expiration_date_data[expiration_date_data.length - 1] : '-';

if (!personal_data['passport']['serial']) {
    personal_data['passport']['serial'] = '-';
}

if (!personal_data['passport']['number']) {
    personal_data['passport']['number'] = '-';
}*/


// DefineRUSPaperPassportCyrillicPage ( NEW )

// let has_rus = false,
//     has_surname = false,
//     has_name = false,
//     has_patronymic = false,
//     is_rus_cyrillic_page = false;
//
// for (let i = 0; i < recognized_data_length; i++) {
//     if (/личная/i.test(recognized_data[i]['text'])) {
//         has_rus = true;
//     }
//
//     if (/Фамилия/i.test(recognized_data[i]['text'])) {
//         has_surname = true;
//     }
//
//     if (/Отчество/i.test(recognized_data[i]['text'])) {
//         has_patronymic = true;
//     }
//
//     if (has_rus && has_surname
//         && has_patronymic) {
//         is_rus_cyrillic_page = true;
//         break;
//     }
// }
//
// RecognizeRusPassport ( NEW )

 let surname = null,
    name = null,
    middle_name = null,
     birth_place = null,
     issue_date = null,
     authority = null,
     sex = null,
     place_of_birth = null,
     subdivision_code = null,
     authority_data = [],
     surname_data = [],
     name_data = [],
    middle_name_data = [],
     birth_place_data = [],
     sex_data = [],
     place_of_birth_data = [],
     issue_date_data = [],
     subdivision_code_data = [];

 for (let i = 0; i < recognized_data_length; i++) {
    if (/фамилия/i.test(recognized_data[i]['text'])) {
         surname = recognized_data[i];
     }

     if (/имя/i.test(recognized_data[i]['text'])) {
         name = recognized_data[i];
     }

     if (/отчество/i.test(recognized_data[i]['text'])) {
         middle_name = recognized_data[i];
     }

     if (/отчество/i.test(recognized_data[i]['text'])) {
         birth_place = recognized_data[i]
    }

     if (/отчество/i.test(recognized_data[i]['text'])) {
         sex = recognized_data[i]
     }

     if (/рождения/i.test(recognized_data[i]['text'])) {
         place_of_birth = recognized_data[i]
     }

     if (/выдачи/i.test(recognized_data[i]['text'])) {
        issue_date = recognized_data[i];
     }

    if (/выдачи/i.test(recognized_data[i]['text'])) {
         subdivision_code = recognized_data[i];
     }

     if (/выдан/i.test(recognized_data[i]['text'])) {
         authority = recognized_data[i];
     }
 }
 // {"language":"ru","location":{"height":45,"width":208,"x":1298,"y":1268},"text":"ГЛАДКИЙ"}
 // { language: 'ru', location: { height: 19, width: 93, x: 1040, y: 1309 }, text: 'Фамилия'} 258
 for (let i = 0; i < recognized_data_length; i++) {
     if (surname
         && recognized_data[i]['location']['x'] >= surname['location']['x']
         && recognized_data[i]['location']['y'] <= surname['location']['y'] - 38
         && recognized_data[i]['location']['y'] >= surname['location']['y'] - 45) {
         surname_data.push(recognized_data[i]['text']);
     }

     // {"language":"ru","location":{"height":42,"width":181,"x":1310,"y":1431},"text":"сергей"}
     // {language: 'ru',location: { height: 21, width: 50, x: 1036, y: 1467 },text: 'Имя'}

     if (name
        && recognized_data[i]['location']['x'] >= name['location']['x']
         && recognized_data[i]['location']['y'] <= name['location']['y'] - 30
         && recognized_data[i]['location']['y'] >= name['location']['y'] - 40) {
         name_data.push(recognized_data[i]['text']);
     }
     // {"language":"ru","location":{"height":42,"width":308,"x":1244,"y":1506},"text":"николаевич"}
     // {"language":"ru","location":{"height":19,"width":93,"x":1039,"y":1547},"text":"Отчество"}
     if (middle_name
         && recognized_data[i]['location']['x'] >= middle_name['location']['x']
         && recognized_data[i]['location']['y'] <= middle_name['location']['y'] - 30
         && recognized_data[i]['location']['y'] >= middle_name['location']['y'] - 45) {
         middle_name_data.push(recognized_data[i]['text']);
     }
     // {"language":"ru","location":{"height":39,"width":290,"x":1430,"y":1593},"text":"06.11.1980"}
     // { language: 'ru',location: { height: 19, width: 93, x: 1039, y: 1547 },text: 'Отчество'}
     if (birth_place
         && recognized_data[i]['location']['x'] >= birth_place['location']['x'] + 200
         && recognized_data[i]['location']['y'] <= birth_place['location']['y'] + 48
         && recognized_data[i]['location']['y'] >= birth_place['location']['y'] + 40) {
         birth_place_data.push(recognized_data[i]['text']);
     }

     if (sex
         && recognized_data[i]['location']['x'] <= sex['location']['x'] + 80
         && recognized_data[i]['location']['y'] <= sex['location']['y'] + 50
         && recognized_data[i]['location']['y'] >= sex['location']['y'] + 40  ) {
         sex_data.push(recognized_data[i]['text']);
     }

     if (place_of_birth
         && recognized_data[i]['location']['x'] >= place_of_birth['location']['x']
         && recognized_data[i]['location']['y'] <= place_of_birth['location']['y'] - 30
         && recognized_data[i]['location']['y'] >= place_of_birth['location']['y'] - 40) {
        place_of_birth_data.push(recognized_data[i]['text']);
     }

     // {"language":"ru","location":{"height":42,"width":65,"x":1064,"y":313},"text":"64"}
     // {"language":"ru","location":{"height":20,"width":67,"x":756,"y":312},"text":"выдан"}
     if (authority
         && recognized_data[i]['location']['x'] >= authority['location']['x'] + 100
         && recognized_data[i]['location']['y'] <= authority['location']['y'] + 200
         && recognized_data[i]['location']['y'] >= authority['location']['y'] - 50  ) {
         authority_data.push(recognized_data[i]['text']);
     }
     // {"language":"ru","location":{"height":46,"width":304,"x":504,"y":1259} 15.01.2005
     // {"language":"ru","location":{"height":20,"width":77,"x":420,"y":1296} выдачи
     if (issue_date
         && recognized_data[i]['location']['x'] >= issue_date['location']['x'] + 20
         && recognized_data[i]['location']['x'] <= issue_date['location']['x'] + 100
         && recognized_data[i]['location']['y'] <= issue_date['location']['y']  + 10
         && recognized_data[i]['location']['y'] >= issue_date['location']['y'] - 40 ) {
         issue_date_data.push(recognized_data[i]['text']);
     }

     if (subdivision_code
         && recognized_data[i]['location']['x'] >= subdivision_code['location']['x'] + 100
         && recognized_data[i]['location']['y'] <= subdivision_code['location']['y']
         && recognized_data[i]['location']['y'] >= subdivision_code['location']['y'] - 40) {
         subdivision_code_data.push(recognized_data[i]['text']);
     }
 }

 if (surname_data.length > 0) {
     personal_data['passport']['surname'] = surname_data[surname_data.length - 1].toUpperCase();
 } else {
     personal_data['passport']['surname'] = '-';
 }

 if (name_data.length > 0) {
     personal_data['passport']['name'] = name_data[name_data.length - 1].toUpperCase();
 } else {
     personal_data['passport']['name'] = '-';
 }

 if (middle_name_data.length > 0) {
     personal_data['passport']['middle_name'] = middle_name_data[middle_name_data.length - 1].toUpperCase();
} else {
     personal_data['passport']['middle_name'] = '-';
 }

 if (birth_place_data.length > 0) {
    personal_data['passport']['birth_place'] = birth_place_data.join(' ')
         .split(' / ');

     if (personal_data['passport']['birth_place'].length > 1) {
         personal_data['passport']['birth_place'] = personal_data['passport']['birth_place'][1];
     } else {
         personal_data['passport']['birth_place'] = personal_data['passport']['birth_place'][0];
     }
 } else {
     personal_data['passport']['birth_place'] = '-';
 }

 if (sex_data.length > 0) {
     personal_data['passport']['sex'] = sex_data[sex_data.length - 1].toUpperCase();
 } else {
     personal_data['passport']['sex'] = '-';
 }

 if (place_of_birth_data.length > 0) {
     personal_data['passport']['place_of_birth'] = place_of_birth_data[place_of_birth_data.length - 1].toUpperCase();
 } else {
     personal_data['passport']['place_of_birth'] = '-';
 }

 if (issue_date_data.length > 0) {
     personal_data['passport']['issue_date'] = issue_date_data[issue_date_data.length - 1];
 } else {
     personal_data['passport']['issue_date'] = '-';
 }

 if (subdivision_code_data.length > 0) {
 } else {
     personal_data['passport']['subdivision_code'] = '-';
 }

 personal_data['passport']['authority'] = authority_data.length > 0 ? authority_data.join(' ').toUpperCase() : '-';

 console.log(personal_data['passport'])


// Recognized KZPassport

// ABBYY

let serialAndNumber = " РОССИЙСКАЯ ФЕДЕРАЦИЯ                                                                               \r\n П ...рт,- „ ОУ ФИС РОССИИ ПО ОМСКОЙ ОБ л. в                                                        \r\n ОКТЯБРЬСКОМ АДМИНИСТРАТИВНОМ ОКРУГЕ                      52 14 421128             _  52 14 421128  \r\n   ГОРОДА ОМСКА                                                                                     \r\n V ,,„12.03.2015     550---003                                                                      \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\n                                                                                                    \r\nРМК1) 8В А2 АМО V А<< I РIN А < V Ь А ОIМ1 КО 7Й А<<<<<<<<<<<                                      \r\n5214211288РВ87003022Р<<<<<<<4150312550003<16                                                       \r\n"
let numberSplit = serialAndNumber.split(" ").filter(number => number.length > 5 && number > 0)[0];
let series = serialAndNumber.split(" ").filter(number => number > 0)
let seriesSplitIndex = serialAndNumber.split(" ").filter(number => number > 0).indexOf(numberSplit) -2;
let seriesSplit = series[seriesSplitIndex] + series[seriesSplitIndex + 1];
personal_data['passport']['series'] = seriesSplit
personal_data['passport']['number'] = numberSplit;


// Корректировка ФИО граждан Кыргызской Республики через ABBYY

// let abbySearch = "Кыргыз Республикасы                     Кыргызская Республика     \r\n      паспорт                                                     \r\n                                                                  \r\n                                                                  \r\n                   Фамилия                                        \r\n                   КАЙЫРБЕК УУЛУ                                  \r\n                                                                  \r\n                   Имя '                                          \r\n                   АМАНГЕЛДИ                                      \r\n                                                                  \r\n                                                                  \r\n                   ТууНгян кущ. Д.ТЩ'ро'зднтя     Жъ лъхм Поп    \r\n                   05 02 1993            Э                       \r\n                   1 уу/н ЯН Жйри /                              \r\n                   КЫРГЫЗСТАН                                    \r\n АИ2636765         УпуГу Н.-ципн улмйсп. Жмен<п*л>7              \r\n                   КЫРГЫЗ                                        \r\n                   20502199300045                                \r\n"
//let abbySearch = "Кыргыз Республикасы                                                       \r\n                                                   Кыргызская Республика  \r\nпаспорт        ЛА*                                                        \r\n                                                                          \r\n                                                                          \r\n                                                                          \r\n                         I Фамилия                                        \r\n                         ТОКТОСУНОВ                                       \r\n                                                                          \r\n                    Им#                                                   \r\n                    ЗАМИРБЕК                                              \r\n                                                                          \r\n                                                                          \r\n                                    ЖАЛАЛОВИЧ Ф,                          \r\n                    Т^у||4и1' Жынысы' Пол                                \r\n                    06 06 1976            Э                              \r\n                    Туупсав =ёйи ‘Мёёирухдения                           \r\n документтин №      КЫРГЫЗСТАН                                           \r\n АИ2671331          Улут? ' НадрНЬпь'фь \" II     номуру                  \r\n                    КЫРГЫЗ          11'I ■'       Г\"1                    \r\n                                         20606197600932                  \r\n"
let abbySearch = "Кыргыз Республикасы              Кыргызская Республика   \r\nпаспорт                                                  \r\n                                                         \r\n                                                         \r\n                                                         \r\n Аты-ж-ну/Фа'химч                                        \r\n МОМУНБАЕВ                                               \r\n                                                         \r\n Имя                                                     \r\n УЛАНБЕК                                                 \r\n Отчество                                                \r\n САЛБАНОВИЧ                                              \r\n Т’.ултан кут / . Л тт.1 ,ю:*71ен1«т                     \r\n 07 11 1981                                              \r\n Туупган жерн 11Леао рождения                            \r\n КЫРГЫЗСТАН                                              \r\n Улуту / Нацттоналытэсть      Жеко нсмуру               \r\n КЫРГЫЗ          Паххналыьй номер                       \r\n 26711198101325                                         \r\n"
let abbySearchArr = abbySearch.split(" ").filter(text => text.length > 0),
    abbySearchNameIndex = abbySearchArr.indexOf("Имя")
let abbyName = abbySearchArr[abbySearchNameIndex + 3]
let testAbby = abbySearchArr.filter(text => text.length > 0)

